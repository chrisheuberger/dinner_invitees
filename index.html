<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BackboneTest</title>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.2/underscore-min.js" type="text/javascript"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
  <script type="text/javascript" src='javascripts/backbone/app.js'></script>
  <script type="text/javascript" src='javascripts/backbone/models/user.js'></script>
  <script type="text/javascript" src='javascripts/backbone/collections/userCollection.js'></script>
  <script type="text/javascript" src='javascripts/backbone/views/users/userView.js'></script>
  <script type="text/javascript" src='javascripts/backbone/views/users/userListView.js'></script>
  <script type='text/template' id='user-list-template'>
    <a href='#/new' class='btn btn-primary'>New User</a>
    <hr />
    <table class='table striped'>
      <thead>
        <tr>
          <th>first name</th>
          <th>last name</th>
          <th>age</th>
        </tr>
      </thead>
      <tbody>
        <% _.each(users, function(user) { %>
          <tr>
            <td><%= htmlEncode(user.get('firstname')) %></td>
            <td><%= htmlEncode(user.get('lastname')) %></td>
            <td><%= htmlEncode(user.get('age')) %></td>
            <td><a class="btn" href="#/edit/<%= user.id %>">Edit</a></td>
          </tr>
        <% }); %>
      </tbody>
    <table>
  </script>

  <script type='text/template' id='edit-user-template'>
    <form class='edit-user-form'>
      <legend><%= user ? 'Edit ' : 'New ' %>User</legend>
      <label>First Name</label>
      <input type='text' name='firstname' value="<%= user ? user.get('firstname') : '' %>" />
      <label>Last Name</label>
      <input type='text' name='lastname' value="<%= user ? user.get('lastname') : '' %>" />
      <label>Age</label>
      <input type='text' name='age' value="<%= user ? user.get('age') : '' %>" />
      <hr />
      <button type='submit' class='btn'><%= user ? 'Update' : 'Create' %></button>
      <% if(user) { %>
        <input type='hidden' name='id' value='<%= user.id %>' />
        <button data-user-id="<%= user.id %>" class='btn btn-danger delete'>Delete</button>
      <% }; %>
    </form>
  </script>

</head>
<body>

  <div class='container'>
    <h1>User Manager</h1>
    <hr />
    <div class='page'></div>
  </div>

</body>
</html>
